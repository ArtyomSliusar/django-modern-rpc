[tox]
skip_missing_interpreters=true
envlist=py{27,34,35,36}-django{18,19,110,111},py{34,35,36}-django{20}

[flake8]
exclude = .git, __pycache__, build, dist, venv*, .tox, .vscode, .cache, *.egg-info
max-complexity = 10
max-line-length = 120

[pytest]
DJANGO_SETTINGS_MODULE = testsite.settings
norecursedirs = .git __pycache__ build dist venv* .tox .vscode .cache *.egg-info
python_paths = modernrpc/tests
testpaths = modernrpc/tests
python_files = test_*.py dummy_*.py
# See https://docs.pytest.org/en/latest/logging.html
# pytest 3.3 merged pytest-catchlog into main branch
# We must configure this to prevent huge logs in tests results
log_cli=true
log_level=INFO

[testenv]
deps =
    django18: Django==1.8.*
    django19: Django==1.9.*
    django110: Django==1.10.*
    django111: Django==1.11.*
    django20: Django==2.0
    -rrequirements.txt
basepython =
    py36: python3.6
    py35: python3.5
    py34: python3.4
    py27: python2.7
commands =
    py.test --cov=modernrpc
    flake8
